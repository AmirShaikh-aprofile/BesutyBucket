```html
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>BeautyBucket Admin</title>
<style>
  body { font-family: Arial, sans-serif; background:#f8f5f5; padding:20px; }
  form { background:#fff; padding:20px; max-width:650px; margin:auto; border-radius:8px; box-shadow:0 2px 8px rgba(0,0,0,.08) }
  input, select, textarea { width:100%; padding:10px; margin:8px 0; border-radius:6px; border:1px solid #ccc }
  button { background:#d6336c; color:#fff; padding:12px; border:none; border-radius:6px; width:100% }
  .product-card { background:#fff; padding:12px; margin:12px 0; border-radius:8px; box-shadow:0 1px 6px rgba(0,0,0,.06) }
  img.thumb { width:80px; height:80px; object-fit:cover; border-radius:6px; }
</style>
</head>

<body>
<h2 style="text-align:center;color:#d6336c">BeautyBucket Admin Portal</h2>

<form id="productForm">
  <label>Product Name</label>
  <input name="name" required />

  <label>Category</label>
  <select name="category" required>
    <option value="">-- Select Category --</option>
  </select>

  <label>Details</label>
  <textarea name="details" rows="2"></textarea>

  <div style="display:flex;gap:12px">
    <div style="flex:1">
      <label>MRP</label>
      <input type="number" step="0.01" name="mrp" id="mrp" required />
    </div>
    <div style="flex:1">
      <label>Purchase Price</label>
      <input type="number" step="0.01" name="purchase" id="purchase" />
    </div>
  </div>

  <div style="display:flex;gap:12px">
    <div style="flex:1">
      <label>Auto Discount (1 pc)</label>
      <input type="number" step="0.01" name="discount1" id="discount1" readonly />
    </div>
    <div style="flex:1">
      <label>Auto Discount (5 pc)</label>
      <input type="number" step="0.01" name="discount5" id="discount5" readonly />
    </div>
  </div>

  <div>
    <label>Profit (auto)</label>
    <input type="number" step="0.01" id="profit" readonly />
  </div>

  <label>Stock</label>
  <input type="number" name="stock" />

  <label>Image</label>
  <input type="file" name="image" accept="image/*" />

  <button type="submit">Add Product</button>
</form>

<h3 style="text-align:center;margin-top:24px">Existing Products</h3>
<div id="productsList" style="max-width:800px;margin:12px auto"></div>

<script>
const BASE = '/api';

function autoCalc() {
  const mrp = parseFloat(document.getElementById("mrp").value) || 0;
  const purchase = parseFloat(document.getElementById("purchase").value) || 0;

  const discount1 = mrp - purchase;          // AUTO DISCOUNT
  const discount5 = discount1 * 5;           // AUTO DISCOUNT × 5
  const profit = mrp - purchase;             // PROFIT

  document.getElementById("discount1").value = discount1 > 0 ? discount1.toFixed(2) : 0;
  document.getElementById("discount5").value = discount5 > 0 ? discount5.toFixed(2) : 0;
  document.getElementById("profit").value = profit > 0 ? profit.toFixed(2) : 0;
}

document.getElementById("mrp").addEventListener("input", autoCalc);
document.getElementById("purchase").addEventListener("input", autoCalc);

// Load categories
async function loadCategories() {
  const res = await fetch(`${BASE}/categories`);
  const cats = await res.json();
  const sel = document.querySelector("select[name=category]");
  sel.innerHTML = '<option value="">-- Select Category --</option>';
  cats.forEach(c => {
    const o = document.createElement('option');
    o.value = c.name;
    o.textContent = c.name;
    sel.appendChild(o);
  });
}
loadCategories();

// Submit form
document.getElementById('productForm').addEventListener('submit', async function(e){
  e.preventDefault();
  const fd = new FormData(this);
  const action = this.getAttribute('data-action') || 'add';
  const url = action === 'add'
    ? `${BASE}/add-product`
    : `${BASE}/update-product/${this.getAttribute('data-id')}`;

  const res = await fetch(url, { method: 'POST', body: fd });
  const json = await res.json();

  alert(json.message || json.error);
  this.reset();
  this.removeAttribute('data-action');
  this.removeAttribute('data-id');
  this.querySelector('button[type=submit]').textContent = 'Add Product';

  loadProducts();
  loadCategories();
});

// Load product list
async function loadProducts(){
  const res = await fetch(`${BASE}/products`);
  const products = await res.json();
  const wrap = document.getElementById('productsList');
  wrap.innerHTML = '';
  products.forEach(p=>{
    const div = document.createElement('div');
    div.className = 'product-card';
    div.innerHTML = `
      <div style="display:flex;gap:12px;align-items:center">
        <img class="thumb" src="/images/${p.image_url || 'Pic.jpg'}" />
        <div style="flex:1">
          <b>${p.name}</b> <small>(${p.category})</small><br>
          MRP: ₹${p.mrp} | Stock: ${p.stock}<br>
          D1: ₹${p.discount_1} | D5: ₹${p.discount_5}
        </div>
        <button onclick="editProduct(${p.id})">Edit</button>
      </div>`;
    wrap.appendChild(div);
  });
}
loadProducts();

async function editProduct(id){
  const res = await fetch(`/api/product/${id}`);
  const p = await res.json();

  const f = document.getElementById('productForm');
  f.name.value = p.name;
  f.category.value = p.category;
  f.details.value = p.details;
  f.mrp.value = p.mrp;
  f.purchase.value = p.purchase_price;
  f.discount1.value = p.discount_1;
  f.discount5.value = p.discount_5;
  f.stock.value = p.stock;

  autoCalc();

  f.querySelector('button[type=submit]').textContent = 'Update Product';
  f.setAttribute('data-action', 'update');
  f.setAttribute('data-id', id);
}
</script>
</body>
</html>
```

